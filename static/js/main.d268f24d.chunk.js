(this["webpackJsonpgame-of-life"]=this["webpackJsonpgame-of-life"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),i=n.n(l),c=(n(12),n(1));function o(e){var t=a.useState(e),n=Object(c.a)(t,2),r=n[0],l=n[1],i=a.useState([e,!1]),o=Object(c.a)(i,2),u=o[0],s=o[1],m=a.useCallback((function(e){s([e,!(null===u||void 0===u?void 0:u[1])]),l(e)}),[u]);return[r,u,m]}function u(e,t){var n=a.useMemo((function(){return"number"===typeof e?e.toString():e}),[e]);return{onChange:a.useCallback((function(n){switch(typeof e){case"number":var a=parseInt(n.target.value)||0;t(Math.max(a,0));break;case"boolean":t(n.target.checked);break;case"string":t(n.target.value);break;default:console.log("Unsupported input type")}}),[e,t]),value:n}}var s=n(2),m=function(e,t){var n=t-e.length;if(n<0)e=(e=e.slice(0,n)).map((function(e){return e.slice(0,n)}));else if(n>0){var a;e.forEach((function(e){e.push.apply(e,Object(s.a)(Array(n).fill(!1)))})),(a=e).push.apply(a,Object(s.a)(Array(n).fill(Array(t).fill(!1))))}return e},p=function(e){var t=e.flat(),n=[e.length],a=0,r=!1;return t.forEach((function(e){e===r?a++:(n.push(a),a=1,r=!r)})),n.push(a),n.join(",")},d=function(e){var t=e.split(",").map((function(e){return parseInt(e)})),n=t.shift(),a=[],r=0,l=n,i=!1;return t.forEach((function(e){var t=f(n,a,r,l,i,e),o=Object(c.a)(t,4);a=o[0],r=o[1],l=o[2],i=o[3]})),a.slice(0,-1)},f=function e(t,n,a,r,l,i){var o;if(n[a]=null!==(o=n[a])&&void 0!==o?o:[],a<t)if(i<r){var u;(u=n[a]).push.apply(u,Object(s.a)(Array(i).fill(l))),l=!l,r-=i}else{var m;(m=n[a]).push.apply(m,Object(s.a)(Array(r).fill(l))),i-=r;var p=e(t,n,++a,r=t,l,i),d=Object(c.a)(p,4);n=d[0],a=d[1],r=d[2],l=d[3]}return[n,a,r,l]},h=[{name:"Still lifes",description:"A still life is a pattern that does not change from one generation to the next.",patterns:{"Block, Beehive, Loaf, Boat, Tub":"15,16,2,2,2,9,2,2,1,1,1,13,1,25,1,13,1,1,1,12,1,1,1,13,1,3,1,13,1,1,1,9,1,3,1,9,1,1,1,12,1,2,1,12,2,26"}},{name:"Oscillators",description:"An oscillator is a pattern that returns to its original state after a certain number of generations (shown in brackets).",patterns:{"Blinker, Toad, Beacon (2)":"10,11,1,9,1,9,1,3,2,8,2,5,1,4,2,2,2,4,2,2,2,8,1,18","Pulsar, Star, Cross (3)":"28,31,3,3,3,45,1,4,1,1,1,4,1,15,1,4,1,1,1,4,1,15,1,4,1,1,1,4,1,17,3,3,3,47,3,3,3,17,1,4,1,1,1,4,1,15,1,4,1,1,1,4,1,6,4,5,1,4,1,1,1,4,1,6,1,2,1,22,3,2,3,5,3,3,3,6,1,6,1,20,1,6,1,20,3,2,3,9,1,12,1,2,1,10,3,11,4,8,3,1,3,21,1,5,1,20,2,5,2,18,2,7,2,18,2,5,2,20,1,5,1,21,3,1,3,23,3,26,1,48","Clock (4)":"12,4,2,10,2,22,4,7,1,4,1,1,2,3,1,1,2,1,1,1,4,1,2,3,1,3,2,1,1,4,1,7,4,22,2,10,2,4","Octagon (5)":"8,3,2,5,1,2,1,3,1,4,1,1,1,6,2,6,1,1,1,4,1,3,1,2,1,5,2,3","Kok's galaxy (8)":"13,28,6,1,2,4,6,1,2,11,2,4,2,5,2,4,2,5,2,4,2,5,2,4,2,11,2,1,6,4,2,1,6,28","Pentadecathlon (15)":"17,124,1,4,1,9,2,1,4,1,2,9,1,4,1,125"}},{name:"Spaceships",description:"A spaceship is a pattern that returns to its original state in a different position after a certain number of generations (shown in brackets).",patterns:{"Glider (4)":"20,2,1,17,1,1,1,18,2,357","Light-weight spaceship (4)":"20,0,1,1,1,20,1,19,1,16,1,2,1,17,3,316","Medium-weight spaceship (4)":"20,1,1,1,1,20,1,15,1,3,1,19,1,16,1,2,1,17,3,295","Heavy-weight spaceship (4)":"20,1,1,1,1,20,1,15,1,3,1,15,1,3,1,19,1,16,1,2,1,17,3,275"}},{name:"Methuselahs",description:"A methuselah is a small pattern that stabilises after a large number of generations (shown in brackets).",patterns:{"R-pentomino (1103)":"130,9416,1,129,3,128,1,7222","Diehard (130)":"30,309,1,29,2,119,1,27,1,1,1,29,1,379","Acorn (5206)":"240,36385,1,237,1,1,1,478,1,240,1,239,1,239,1,19774"}},{name:"Guns",description:"A gun is a pattern that returns to its original state after a certain number of generations, while launching spaceships.",patterns:{"Gosper glider gun":"36,7,2,34,2,322,3,32,1,3,1,30,1,5,1,29,1,5,1,32,1,33,1,3,1,32,3,34,1,104,3,33,3,32,1,3,1,66,2,3,2,355,2,34,2,29"}}],g=function(e){return a.createElement("strong",{style:{visibility:e.show?"visible":"hidden"}},e.symbol)},b=function(e){var t=u(e.patternInput,e.setPatternInput),n=u(e.oddsInput,e.setOddsInput),r=u(e.customPatternInput,e.setCustomPatternInput),l=a.useMemo((function(){var t;switch(e.patternInput){case"Random":return a.createElement(a.Fragment,null,a.createElement("label",{htmlFor:"odds"},"Cells starting live (%)"),a.createElement("input",Object.assign({type:"number",id:"odds"},n)),a.createElement(g,{show:e.oddsInput!==e.odds,symbol:"*"}));case"Load":return t=parseInt(e.customPatternInput),a.createElement(a.Fragment,null,a.createElement("label",{htmlFor:"customPattern"},t?"Min grid width: ".concat(t," cells"):"Paste saved grid"),a.createElement("input",Object.assign({type:"string",id:"customPattern"},r)),a.createElement(g,{show:e.customPatternInput!==e.customPattern,symbol:"*"}));default:return t=parseInt(e.patternInput),a.createElement(a.Fragment,null,a.createElement("span",null,"Min grid width: ",t," cells"),a.createElement("button",{onClick:e.openPatternInfoDialog},"Pattern info"))}}),[e,n,r]);return a.createElement(a.Fragment,null,a.createElement("label",{htmlFor:"pattern"},"Choose pattern"),a.createElement("select",Object.assign({id:"pattern"},t),""===e.patternInput&&a.createElement("option",{value:"",disabled:!0},"Select pattern"),a.createElement("option",{value:"Random"},"Random"),a.createElement("option",{value:"Load"},"Load saved grid"),h.map((function(e){return[a.createElement("option",{disabled:!0,key:e.name,value:e.name},"~~",e.name,"~~"),Object.entries(e.patterns).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return a.createElement("option",{key:n,value:[r]},n)}))]}))),a.createElement(g,{show:e.pattern!==e.patternInput,symbol:"*"}),l)};var E=function(e){var t=a.useState("true"!==localStorage.getItem("promptShown")),n=Object(c.a)(t,2),r=n[0],l=n[1],i=a.useCallback((function(){localStorage.setItem("promptShown","true"),l(!1)}),[]),o=a.useCallback((function(){i(),e.openAboutDialog()}),[i,e]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"about-button-wrapper ".concat(r&&"show-prompt")},a.createElement("button",{className:"about-button",onClick:o},"About")),r&&a.createElement("div",{onClick:i,className:"prompt-background"},a.createElement("div",{className:"prompt"},"I'd recommend reading the first two sections of this before starting. ",a.createElement("br",null),"Tap anywhere to close")))},v=function(){return a.createElement(a.Fragment,null,a.createElement("h2",null,"What is this?"),a.createElement("p",null,a.createElement("a",{href:"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life",target:"blank"},"Conway's Game of Life on Wikipedia")),a.createElement("h2",null,"How do I use it?"),a.createElement("p",null,"In the first box, you select the starting pattern.",a.createElement("br",null),"You can choose a random pattern, a preset pattern, or a saved pattern (copied after clicking the 'Save grid' button).",a.createElement("br",null),"For preset patterns, click 'Pattern info' to learn more about that category of pattern."),a.createElement("p",null,"In the second box, you select the size of the grid in cells, & the size of the cells in pixels.",a.createElement("br",null),"The lock checkbox restricts those two inputs, such that the resulting size of the grid in pixels will not change."),a.createElement("p",null,"In the third box, you select how fast the game should try to run.",a.createElement("br",null),"The actual speed will be limited by how quickly your device can calculate & draw the game, as well as the screen's refresh rate."),a.createElement("p",null,"Using the buttons, you can:"),a.createElement("ul",null,a.createElement("li",null,"Play/pause the game"),a.createElement("li",null,"Update the cell size & refresh rate"),a.createElement("li",null,"Start a new game"),a.createElement("li",null,"Save the current state of the game. The resulting text can then be pasted in the first box, after selecting 'Load saved grid'")),a.createElement("p",null,"By clicking on the cells in the grid, you can flip their state between live & dead. This can be done while paused, or while the game is running."),a.createElement("h2",null,"How was it made?"),a.createElement("p",null,"I originally made this in L\xd6VE, a 2d game engine that uses Lua as its scripting language."),a.createElement("p",null,"Unlike in HTML, user inputs had to be made entirely from scratch in L\xd6VE, & I wanted to minimise use of other peoples' code. So rather than writing them or using a component library, I restarted in React."),a.createElement("p",null,"Writing the game logic took longer, since React isn't designed for a game loop like L\xd6VE is, but the negatives there were outweighed by improved UI appearance & development speed, as well as a web-based app not requiring the user to download & run an executable."),a.createElement("p",null,a.createElement("a",{href:"https://github.com/James-Benson/game-of-life",target:"blank"},"Project source code on Github")),a.createElement("p",null,a.createElement("a",{href:"/game-of-life-windows64.zip"},"L\xd6VE version Windows executable")),a.createElement("p",null,"This has only been tested on Windows 10, but to run the executable on any OS supported by L\xd6VE, ",a.createElement("a",{href:"https://love2d.org/",target:"blank"},"install the appropriate version of L\xd6VE"),", then run ",a.createElement("a",{href:"game-of-life.love"},"game-of-life.love")))},w=function(e){var t=a.useState(!1),n=Object(c.a)(t,2),r=n[0],l=n[1],i=a.useState(e.gridSizeInput*e.cellSizeInput),o=Object(c.a)(i,2),s=o[0],m=o[1],p=a.useMemo((function(){if(r){for(var e=[1],t=2;t<=s/2;t++)Number.isInteger(s/t)&&e.unshift(t);return e.unshift(s),e}}),[r,s]);a.useEffect((function(){if(r){var t=s/e.gridSizeInput;e.setCellSizeInput(t),m(t*e.gridSizeInput)}else m(e.gridSizeInput*e.cellSizeInput)}),[e.gridSizeInput]),a.useEffect((function(){if(r){var t=s/e.cellSizeInput;e.setGridSizeInput(t),m(t*e.cellSizeInput)}else m(e.gridSizeInput*e.cellSizeInput)}),[e.cellSizeInput]);var d=u(e.gridSizeInput,e.setGridSizeInput),f=u(e.cellSizeInput,e.setCellSizeInput),h=u(r,l);return a.createElement(a.Fragment,null,a.createElement("label",{htmlFor:"gridSize"},"Width/height of grid in cells"),r?a.createElement("select",Object.assign({id:"gridSize"},d),null===p||void 0===p?void 0:p.map((function(e){return a.createElement("option",{key:"grid"+e,value:e},e)}))):a.createElement("input",Object.assign({type:"number",id:"gridSize"},d)),a.createElement(g,{show:e.gridSizeInput!==e.gridSize,symbol:"*"}),a.createElement("label",{htmlFor:"cellSize"},"Width/height of cells in pixels"),r?a.createElement("select",Object.assign({id:"cellSize"},f),null===p||void 0===p?void 0:p.map((function(e){return a.createElement("option",{key:"cell"+e,value:e},e)}))):a.createElement("input",Object.assign({type:"number",id:"cellSize"},f)),a.createElement(g,{show:e.cellSizeInput!==e.cellSize,symbol:"\u2020"}),a.createElement("label",{htmlFor:"lockGridSize"},"Lock resulting grid size"),a.createElement("input",Object.assign({type:"checkbox",id:"lockGridSize"},h)))};var S=function(){var e=a.useRef(),t=a.useState(),n=Object(c.a)(t,2),r=n[0],l=n[1],i=a.useCallback((function(t){e.current=t,l((null===t||void 0===t?void 0:t.getContext("2d"))||void 0)}),[]),f=function(e){var t=a.useState({screenWidth:window.innerWidth,screenHeight:window.innerHeight}),n=Object(c.a)(t,2),r=n[0],l=n[1];return a.useEffect((function(){var t=void 0,n=function(){t&&clearTimeout(t),t=setTimeout((function(){l({screenWidth:window.innerWidth,screenHeight:window.innerHeight})}),e)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),r}(200),S=f.screenWidth,k=f.screenHeight,y=a.useState(50),I=Object(c.a)(y,2),C=I[0],O=I[1],j=a.useState(10),z=Object(c.a)(j,2),x=z[0],R=z[1],P=a.useState(0),F=Object(c.a)(P,2),L=F[0],M=F[1],N=a.useState(30),A=Object(c.a)(N,2),T=A[0],W=A[1],B=a.useState("Random"),G=Object(c.a)(B,2),H=G[0],U=G[1],V=a.useState(""),D=Object(c.a)(V,2),q=D[0],J=D[1],_=a.useMemo((function(){return L*x}),[L,x]),Y=a.useState([[]]),K=Object(c.a)(Y,2),X=K[0],$=K[1],Q=o(0),Z=Object(c.a)(Q,3),ee=Z[0],te=Z[1],ne=Z[2],ae=o(0),re=Object(c.a)(ae,3),le=re[0],ie=re[1],ce=re[2],oe=a.useState(0),ue=Object(c.a)(oe,2),se=ue[0],me=ue[1],pe=a.useState(0),de=Object(c.a)(pe,2),fe=de[0],he=de[1],ge=a.useState("Random"),be=Object(c.a)(ge,2),Ee=be[0],ve=be[1],we=a.useState(""),Se=Object(c.a)(we,2),ke=Se[0],ye=Se[1],Ie=a.useMemo((function(){switch(H){case"Random":return;case"Load":return parseInt(q);default:return parseInt(H)}}),[H,q]),Ce=function(e,t){var n=a.useRef(0),r=a.useRef(),l=a.useRef(0),i=a.useState(!1),o=Object(c.a)(i,2),u=o[0],s=o[1],m=a.useState(!1),p=Object(c.a)(m,2),d=p[0],f=p[1],h=a.useCallback((function(a,i){if(r.current){var c=a-r.current;l.current+=c,l.current>1e3/e&&(l.current=l.current-1e3/e,i=t(i))}else l.current=0,i=t(i);r.current=a,n.current=requestAnimationFrame((function(e){return h(e,i)}))}),[t,e]),g=a.useCallback((function(e){u?cancelAnimationFrame(n.current):(r.current=void 0,n.current=requestAnimationFrame((function(t){return h(t,e)}))),s((function(e){return!e}))}),[u,h]),b=a.useCallback((function(){u&&(f(!0),g())}),[u,g]);return a.useEffect((function(){d&&(f(!1),g())}),[d]),[g,u,b]}(fe,(function(e){var t=Ve(e);return De(t),t})),Oe=Object(c.a)(Ce,3),je=Oe[0],ze=Oe[1],xe=Oe[2],Re=function(){var e=a.useState(),t=Object(c.a)(e,2),n=t[0],r=t[1],l=a.useState(!1),i=Object(c.a)(l,2),o=i[0],u=i[1];return[function(){return o?a.createElement("div",{className:"dialog-background"},a.createElement("div",{className:"dialog"},a.createElement("button",{onClick:function(){return u(!1)}},"Close"),a.createElement("div",{className:"content"},n))):a.createElement(a.Fragment,null)},a.useCallback((function(e){e&&r(e),u(!0)}),[])]}(),Pe=Object(c.a)(Re,2),Fe=Pe[0],Le=Pe[1],Me=a.useCallback((function(){ze&&je(),Le(a.createElement(v,null))}),[Le,ze,je]),Ne=function(){var e=a.useRef(),t=a.useCallback((function(){var t;(null===(t=e.current)||void 0===t?void 0:t.innerText)&&navigator.clipboard.writeText(e.current.innerText)}),[e]);return[e,t]}(),Ae=Object(c.a)(Ne,2),Te=Ae[0],We=Ae[1],Be=a.useCallback((function(){ze&&je(),Le(a.createElement(a.Fragment,null,a.createElement("p",null,"Copy the below text, select 'Load Saved Grid' in the pattern dropdown, & paste into the input"),a.createElement("button",{onClick:We},"Copy pattern"),a.createElement("input",{type:"text",hidden:!0,defaultValue:p(X)}),a.createElement("p",{ref:Te},p(X))))}),[Le,ze,je,X,We,Te]),Ge=a.useCallback((function(){var e;ze&&je(),Le(a.createElement(a.Fragment,null,null===(e=h.filter((function(e){return Object.values(e.patterns).includes(H)}))[0])||void 0===e?void 0:e.description))}),[Le,ze,je,H]),He=a.useCallback((function(){for(var e=[],t=0;t<le;t++){e[t]=[];for(var n=0;n<le;n++)e[t][n]=100*Math.random()<ee}return e}),[le,ee]),Ue=a.useCallback((function(){switch(H){case"Random":return He();case"Load":return m(d(q),le);default:return m(d(H),le)}}),[H,q,He,le]),Ve=a.useCallback((function(e){var t;e=null!==(t=e)&&void 0!==t?t:X;for(var n=[],a=0;a<le;a++){n[a]=[];for(var r=0;r<le;r++){for(var l=0,i=a-1;i<=a+1;i++)for(var c=r-1;c<=r+1;c++){var o;i===a&&c===r||!(null===(o=e[i])||void 0===o?void 0:o[c])||l++}n[a][r]=e[a][r]&&2===l||3===l}}return $(n),n}),[X,le]),De=a.useCallback((function(e){var t,n;if(e=null!==(t=e)&&void 0!==t?t:X,r&&(null===(n=e)||void 0===n?void 0:n[le-1])){r.clearRect(0,0,le*se,le*se);for(var a=0;a<le;a++)for(var l=0;l<le;l++)e[a][l]&&r.fillRect(a*se,l*se,se,se)}}),[r,le,se,X]),qe=function(e,t,n,r,l,i,c,o,u,s,m,p,d,f,h,g,b,E,v){var w=a.useCallback((function(){t(e),r(n),i(l),u(o),p(m),f(d)}),[e,n,l,o,m,d,i,u,p,r,f,t]);return a.useEffect((function(){h&&g();var e=b();E(e),v(e)}),[c,s]),w}(H,ve,q,ye,C,ne,te,L,ce,ie,x,me,T,he,ze,je,Ue,$,De),Je=function(e,t,n,r,l,i,c,o){var u=a.useCallback((function(){c(),t(n),l(i)}),[n,t,i,l,c]);return a.useEffect((function(){o()}),[e,r]),u}(se,me,x,fe,he,T,xe,De);!function(e,t,n,r,l,i,c,o){a.useEffect((function(){if(e.current&&!t){var a=e.current.getBoundingClientRect().y,i=Math.min(n,r-a);o(Math.floor(i/l))}}),[e]),a.useEffect((function(){!i.length&&t&&c()}),[t])}(e,L,S,k,x,X,qe,M);var _e=a.useCallback((function(t){if(e.current&&X){var n=e.current.getBoundingClientRect(),a=Math.floor((t.clientX-n.x)/se),r=Math.floor((t.clientY-n.y)/se);xe();var l=X.map((function(e){return Object(s.a)(e)}));l[a][r]=!X[a][r],$(l),De(l)}}),[se,e,X,De,xe]),Ye=a.useMemo((function(){if(e.current){var t=e.current.getBoundingClientRect().y;return Ie&&L<Ie?a.createElement("p",null,"Resulting grid too small for pattern. ",a.createElement("br",null),"Recommended min grid size:",a.createElement("br",null),Ie,"*",Ie,"\xa0cells"):_>Math.min(S,k)?a.createElement("p",null,"Resulting grid won't fit screen.",a.createElement("br",null),"Recommended max grid size:",a.createElement("br",null),S,"*",k,"\xa0pixels"):_>Math.min(S,k-t)?a.createElement("p",null,"Controls & resulting grid won't fit screen.",a.createElement("br",null),"Recommended max grid size:",a.createElement("br",null),S,"*",k-t,"\xa0pixels"):void 0}}),[e,S,k,_,L,Ie]);return a.createElement(a.Fragment,null,a.createElement(Fe,null),a.createElement("div",{className:"container"},a.createElement(E,{openAboutDialog:Me}),a.createElement("div",{className:"flex-container"},a.createElement("div",{className:"flex-col"},a.createElement("div",{className:"control-container"},a.createElement(b,{pattern:Ee,patternInput:H,setPatternInput:U,customPattern:ke,customPatternInput:q,setCustomPatternInput:J,odds:ee,oddsInput:C,setOddsInput:O,openPatternInfoDialog:Ge})),a.createElement("div",{className:"control-container"},a.createElement(w,{gridSize:le,gridSizeInput:L,setGridSizeInput:M,cellSize:se,cellSizeInput:x,setCellSizeInput:R})),a.createElement("div",{className:"control-container"},a.createElement("label",{htmlFor:"fps"},"Cycles per second"),a.createElement("input",Object.assign({type:"number",id:"fps"},u(T,W))),a.createElement(g,{show:T!==fe,symbol:"\u2020"}))),a.createElement("div",{className:"flex-col"},a.createElement("p",null,a.createElement("strong",null,"*"),"Start new game to apply"),a.createElement("p",null,a.createElement("strong",null,"\u2020"),"Update/start new game to apply"),a.createElement("p",null,"Resulting grid size:",a.createElement("br",null),_,"*",_,"\xa0pixels"),Ye)),a.createElement("div",{className:"buttons-container"},a.createElement("button",{className:"play-pause-button",onClick:function(){return je()}},ze?"\u23f8\ufe0f Pause":"\u25b6\ufe0f Play"),a.createElement("button",{onClick:Je},"Update"),a.createElement("button",{onClick:qe},"New game"),a.createElement("button",{onClick:Be},"Save")),a.createElement("canvas",{ref:i,onClick:function(e){return _e(e)},width:le*se,height:le*se})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports=n(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.d268f24d.chunk.js.map