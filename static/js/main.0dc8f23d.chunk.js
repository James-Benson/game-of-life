(this["webpackJsonpgame-of-life"]=this["webpackJsonpgame-of-life"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(6),c=n.n(a),s=(n(13),n(3)),o=n(2);function l(e){var t=r.useState(e),n=Object(o.a)(t,2),i=n[0],a=n[1],c=r.useCallback((function(e){switch(typeof i){case"boolean":a(e.target.checked);break;case"number":a(Math.max(0,parseInt(e.target.value)||0));break;case"string":a(e.target.value)}}),[a,i]);return[r.useMemo((function(){switch(typeof i){case"boolean":return{onChange:c,checked:i};case"number":case"string":return{onChange:c,value:i}}}),[c,i]),i,a]}var u=n(0),d=r.createContext({}),b=function(e){var t=e.children,n=r.useRef(),i=r.useState(),a=Object(o.a)(i,2),c=a[0],s=a[1],b=function(e){var t=r.useState({screenWidth:window.innerWidth,screenHeight:window.innerHeight}),n=Object(o.a)(t,2),i=n[0],a=n[1],c=r.useMemo((function(){var e=navigator.userAgent||navigator.vendor;return!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/.test(e.substr(0,4))}),[]);return r.useEffect((function(){if(c){var t,n=function(){t&&clearTimeout(t),t=setTimeout((function(){a({screenWidth:window.innerWidth,screenHeight:window.innerHeight})}),e)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}}),[e,c]),i}(200),h=b.screenWidth,p=b.screenHeight,j=l(50),f=Object(o.a)(j,2),m=f[0],g=f[1],v=l(10),x=Object(o.a)(v,3),O=x[0],w=x[1],S=x[2],k=l(0),y=Object(o.a)(k,3),C=y[0],z=y[1],I=y[2],R=l(30),P=Object(o.a)(R,2),F=P[0],G=P[1],L=l("Random"),M=Object(o.a)(L,2),A=M[0],E=M[1],N=l(""),W=Object(o.a)(N,2),T=W[0],B=W[1],H=r.useRef([[]]),q=r.useState(0),D=Object(o.a)(q,2),V=D[0],U=D[1],_=r.useState(0),J=Object(o.a)(_,2),Y=J[0],K=J[1],X=r.useState(0),$=Object(o.a)(X,2),Q=$[0],Z=$[1],ee=r.useState(0),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ie=r.useState("Random"),ae=Object(o.a)(ie,2),ce=ae[0],se=ae[1],oe=r.useState(""),le=Object(o.a)(oe,2),ue=le[0],de=le[1],be=r.useMemo((function(){switch(E){case"Random":return;case"Load":return parseInt(B);default:return parseInt(E)}}),[E,B]),he=r.useMemo((function(){return z*w}),[z,w]),pe=function(e){var t=e.canvasContext,n=e.currentGridRef;return r.useCallback((function(r){var i,a,c=n.current,s=null!==(i=null===r||void 0===r?void 0:r.gridSize)&&void 0!==i?i:e.gridSize,o=null!==(a=null===r||void 0===r?void 0:r.cellSize)&&void 0!==a?a:e.cellSize;if(t&&(null===c||void 0===c?void 0:c[s-1])){t.clearRect(0,0,s*o,s*o);for(var l=0;l<s;l++)for(var u=0;u<s;u++)c[l][u]&&t.fillRect(l*o,u*o,o,o)}}),[n,e.gridSize,e.cellSize,t])}({cellSize:Q,currentGridRef:H,gridSize:Y,canvasContext:c}),je=function(e){var t=e.currentGridRef;return r.useCallback((function(){for(var e=t.current,n=e.length,r=[],i=0;i<n;i++){r[i]=[];for(var a=0;a<n;a++){for(var c=0,s=i-1;s<=i+1;s++)for(var o=a-1;o<=a+1;o++){var l;s===i&&o===a||!(null===(l=e[s])||void 0===l?void 0:l[o])||c++}r[i][a]=e[i][a]&&2===c||3===c}}t.current=r}),[t])}({currentGridRef:H}),fe=function(e,t){var n=r.useRef(0),i=r.useRef(),a=r.useRef(0),c=r.useState(!1),s=Object(o.a)(c,2),l=s[0],u=s[1],d=r.useState(!1),b=Object(o.a)(d,2),h=b[0],p=b[1],j=r.useCallback((function(r){if(i.current){var c=r-i.current;a.current+=c,a.current>1e3/e&&(a.current=a.current-1e3/e,t())}else a.current=0,t();i.current=r,n.current=requestAnimationFrame((function(e){return j(e)}))}),[t,e]),f=r.useCallback((function(){l?cancelAnimationFrame(n.current):(i.current=void 0,n.current=requestAnimationFrame((function(e){return j(e)}))),u((function(e){return!e}))}),[l,j]),m=r.useCallback((function(){l&&(p(!0),f())}),[l,f]);return r.useEffect((function(){h&&(p(!1),f())}),[h]),[f,l,m]}(ne,(function(){je(),pe()})),me=Object(o.a)(fe,3),ge=me[0],ve=me[1],xe=me[2],Oe=r.useCallback((function(e){ve&&ge(),e()}),[ve,ge]),we={canvasRef:n,canvasContext:c,setCanvasContext:s,screenWidth:h,screenHeight:p,oddsInputControl:m,oddsInput:g,cellSizeInputControl:O,cellSizeInput:w,setCellSizeInput:S,gridSizeInputControl:C,gridSizeInput:z,setGridSizeInput:I,fpsInputControl:F,fpsInput:G,patternInputControl:A,patternInput:E,customPatternInputControl:T,customPatternInput:B,currentGridRef:H,odds:V,setOdds:U,gridSize:Y,setGridSize:K,cellSize:Q,setCellSize:Z,fps:ne,setFps:re,pattern:ce,setPattern:se,customPattern:ue,setCustomPattern:de,patternSize:be,predictedSize:he,toggleAnimation:ge,isAnimating:ve,tempPause:xe,pauseFirst:Oe,drawGrid:pe};return Object(u.jsx)(d.Provider,{value:we,children:t})},h=n(4),p=function(e,t){var n=t-e.length;if(n<0)e=(e=e.slice(0,n)).map((function(e){return e.slice(0,n)}));else if(n>0){var r;e.forEach((function(e){e.push.apply(e,Object(h.a)(Array(n).fill(!1)))})),(r=e).push.apply(r,Object(h.a)(Array(n).fill(Array(t).fill(!1))))}return e},j=function(e){var t=e.split(",").map((function(e){return parseInt(e)})),n=t.shift(),r=[],i=0,a=n,c=!1;return t.forEach((function(e){var t=f(n,r,i,a,c,e),s=Object(o.a)(t,4);r=s[0],i=s[1],a=s[2],c=s[3]})),r.slice(0,-1)},f=function e(t,n,r,i,a,c){var s;if(n[r]=null!==(s=n[r])&&void 0!==s?s:[],r<t)if(c<i){var l;(l=n[r]).push.apply(l,Object(h.a)(Array(c).fill(a))),a=!a,i-=c}else{var u;(u=n[r]).push.apply(u,Object(h.a)(Array(i).fill(a))),c-=i;var d=e(t,n,++r,i=t,a,c),b=Object(o.a)(d,4);n=b[0],r=b[1],i=b[2],a=b[3]}return[n,r,i,a]},m=function(e){var t=e.customPattern,n=e.gridSize,r=e.odds,i=e.pattern;switch(i){case"Random":return function(e){for(var t=e.gridSize,n=e.odds,r=[],i=0;i<t;i++){r[i]=[];for(var a=0;a<t;a++)r[i][a]=100*Math.random()<n}return r}({gridSize:n,odds:r});case"Load":return p(j(t),n);default:return p(j(i),n)}},g=[{name:"Still lifes",description:"A still life is a pattern that does not change from one generation to the next.",patterns:{"Block, Beehive, Loaf, Boat, Tub":"15,16,2,2,2,9,2,2,1,1,1,13,1,25,1,13,1,1,1,12,1,1,1,13,1,3,1,13,1,1,1,9,1,3,1,9,1,1,1,12,1,2,1,12,2,26"}},{name:"Oscillators",description:"An oscillator is a pattern that returns to its original state after a certain number of generations (shown in brackets).",patterns:{"Blinker, Toad, Beacon (2)":"10,11,1,9,1,9,1,3,2,8,2,5,1,4,2,2,2,4,2,2,2,8,1,18","Pulsar, Star, Cross (3)":"28,31,3,3,3,45,1,4,1,1,1,4,1,15,1,4,1,1,1,4,1,15,1,4,1,1,1,4,1,17,3,3,3,47,3,3,3,17,1,4,1,1,1,4,1,15,1,4,1,1,1,4,1,6,4,5,1,4,1,1,1,4,1,6,1,2,1,22,3,2,3,5,3,3,3,6,1,6,1,20,1,6,1,20,3,2,3,9,1,12,1,2,1,10,3,11,4,8,3,1,3,21,1,5,1,20,2,5,2,18,2,7,2,18,2,5,2,20,1,5,1,21,3,1,3,23,3,26,1,48","Clock (4)":"12,4,2,10,2,22,4,7,1,4,1,1,2,3,1,1,2,1,1,1,4,1,2,3,1,3,2,1,1,4,1,7,4,22,2,10,2,4","Octagon (5)":"8,3,2,5,1,2,1,3,1,4,1,1,1,6,2,6,1,1,1,4,1,3,1,2,1,5,2,3","Kok's galaxy (8)":"13,28,6,1,2,4,6,1,2,11,2,4,2,5,2,4,2,5,2,4,2,5,2,4,2,11,2,1,6,4,2,1,6,28","Pentadecathlon (15)":"17,124,1,4,1,9,2,1,4,1,2,9,1,4,1,125"}},{name:"Spaceships",description:"A spaceship is a pattern that returns to its original state in a different position after a certain number of generations (shown in brackets).",patterns:{"Glider (4)":"20,2,1,17,1,1,1,18,2,357","Light-weight spaceship (4)":"20,0,1,1,1,20,1,19,1,16,1,2,1,17,3,316","Medium-weight spaceship (4)":"20,1,1,1,1,20,1,15,1,3,1,19,1,16,1,2,1,17,3,295","Heavy-weight spaceship (4)":"20,1,1,1,1,20,1,15,1,3,1,15,1,3,1,19,1,16,1,2,1,17,3,275"}},{name:"Methuselahs",description:"A methuselah is a small pattern that stabilises after a large number of generations (shown in brackets).",patterns:{"R-pentomino (1103)":"130,9416,1,129,3,128,1,7222","Diehard (130)":"30,309,1,29,2,119,1,27,1,1,1,29,1,379","Acorn (5206)":"240,36385,1,237,1,1,1,478,1,240,1,239,1,239,1,19774"}},{name:"Guns",description:"A gun is a pattern that returns to its original state after a certain number of generations, while launching spaceships.",patterns:{"Gosper glider gun":"36,7,2,34,2,322,3,32,1,3,1,30,1,5,1,29,1,5,1,32,1,33,1,3,1,32,3,34,1,104,3,33,3,32,1,3,1,66,2,3,2,355,2,34,2,29"}}],v=function(e){var t=r.useMemo((function(){return document.createElement("div")}),[]),n=e.showDialog?Object(u.jsx)("div",{className:"dialog-background",children:Object(u.jsxs)("div",{className:"dialog",children:[Object(u.jsx)("button",{onClick:e.closeDialog,children:"Close"}),Object(u.jsx)("div",{className:"content",children:e.children})]})}):null;return r.useEffect((function(){return document.body.appendChild(t),function(){document.body.removeChild(t)}}),[t]),a.createPortal(n,t)},x=function(e){return Object(u.jsx)("strong",{style:{visibility:e.show?"visible":"hidden"},children:e.symbol})},O=function(){var e=r.useContext(d),t=e.oddsInputControl,n=e.oddsInput,i=e.patternInputControl,a=e.patternInput,c=e.customPatternInputControl,l=e.customPatternInput,b=e.odds,h=e.pattern,p=e.customPattern,j=e.pauseFirst,f=r.useState(!1),m=Object(o.a)(f,2),O=m[0],w=m[1],S=r.useCallback((function(){j((function(){return w(!0)}))}),[j]),k=r.useMemo((function(){var e;switch(a){case"Random":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("label",{htmlFor:"odds",children:"Cells starting live (%)"}),Object(u.jsx)("input",Object(s.a)({type:"number",id:"odds"},t)),Object(u.jsx)(x,{show:n!==b,symbol:"*"})]});case"Load":return e=parseInt(l),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("label",{htmlFor:"customPattern",children:e?"Min grid width: ".concat(e," cells"):"Paste saved grid"}),Object(u.jsx)("input",Object(s.a)({type:"string",id:"customPattern"},c)),Object(u.jsx)(x,{show:l!==p,symbol:"*"})]});default:return e=parseInt(a),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("span",{children:["Min grid width: ",e," cells"]}),Object(u.jsx)("button",{onClick:S,children:"Pattern info"})]})}}),[p,l,c,b,n,t,a,S]),y=r.useMemo((function(){var e;return null===(e=g.filter((function(e){return Object.values(e.patterns).includes(a)}))[0])||void 0===e?void 0:e.description}),[a]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{closeDialog:function(){return w(!1)},showDialog:O,children:y}),Object(u.jsx)("label",{htmlFor:"pattern",children:"Choose pattern"}),Object(u.jsxs)("select",Object(s.a)(Object(s.a)({id:"pattern"},i),{},{children:[""===a&&Object(u.jsx)("option",{value:"",disabled:!0,children:"Select pattern"}),Object(u.jsx)("option",{value:"Random",children:"Random"}),Object(u.jsx)("option",{value:"Load",children:"Load saved grid"}),g.map((function(e){return[Object(u.jsxs)("option",{disabled:!0,value:e.name,children:["~~",e.name,"~~"]},e.name),Object.entries(e.patterns).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(u.jsx)("option",{value:[r],children:n},n)}))]}))]})),Object(u.jsx)(x,{show:h!==a,symbol:"*"}),k]})};function w(){var e=r.useContext(d),t=e.oddsInput,n=e.cellSizeInput,i=e.gridSizeInput,a=e.fpsInput,c=e.patternInput,s=e.customPatternInput,o=e.currentGridRef,l=e.setOdds,u=e.setGridSize,b=e.setCellSize,h=e.setFps,p=e.setPattern,j=e.setCustomPattern,f=e.toggleAnimation,g=e.isAnimating,v=e.drawGrid;return r.useCallback((function(e){p(c),j(s),l(t),u(null!==e&&void 0!==e?e:i),b(n),h(a),g&&f(),o.current=m({customPattern:s,gridSize:null!==e&&void 0!==e?e:i,odds:t,pattern:c}),v({cellSize:n,gridSize:null!==e&&void 0!==e?e:i})}),[p,c,j,s,l,t,u,i,b,n,h,a,g,o,v,f])}var S=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"What is this?"}),Object(u.jsx)("p",{children:Object(u.jsx)("a",{href:"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life",target:"blank",children:"Conway's Game of Life on Wikipedia"})}),Object(u.jsx)("h2",{children:"How do I use it?"}),Object(u.jsxs)("p",{children:["In the first box, you select the starting pattern.",Object(u.jsx)("br",{}),"You can choose a random pattern, a preset pattern, or a saved pattern (copied after clicking the 'Save grid' button).",Object(u.jsx)("br",{}),"For preset patterns, click 'Pattern info' to learn more about that category of pattern."]}),Object(u.jsxs)("p",{children:["In the second box, you select the size of the grid in cells, & the size of the cells in pixels.",Object(u.jsx)("br",{}),"The lock checkbox restricts those two inputs, such that the resulting size of the grid in pixels will not change."]}),Object(u.jsxs)("p",{children:["In the third box, you select how fast the game should try to run.",Object(u.jsx)("br",{}),"The actual speed will be limited by how quickly your device can calculate & draw the game, as well as the screen's refresh rate."]}),Object(u.jsx)("p",{children:"Using the buttons, you can:"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Play/pause the game"}),Object(u.jsx)("li",{children:"Update the cell size & refresh rate"}),Object(u.jsx)("li",{children:"Start a new game"}),Object(u.jsx)("li",{children:"Save the current state of the game. The resulting text can then be pasted in the first box, after selecting 'Load saved grid'"})]}),Object(u.jsx)("p",{children:"By clicking on the cells in the grid, you can flip their state between live & dead. This can be done while paused, or while the game is running."}),Object(u.jsx)("h2",{children:"How was it made?"}),Object(u.jsx)("p",{children:"I originally made this in L\xd6VE, a 2d game engine that uses Lua as its scripting language."}),Object(u.jsx)("p",{children:"Unlike in HTML, user inputs had to be made entirely from scratch in L\xd6VE, & I wanted to minimise use of other peoples' code. So rather than writing them or using a component library, I restarted in React."}),Object(u.jsx)("p",{children:"Writing the game logic took longer, since React isn't designed for a game loop like L\xd6VE is, but the negatives there were outweighed by improved UI appearance & development speed, as well as a web-based app not requiring the user to download & run an executable."}),Object(u.jsx)("p",{children:Object(u.jsx)("a",{href:"https://github.com/James-Benson/game-of-life",target:"blank",children:"Project source code on Github"})}),Object(u.jsx)("p",{children:Object(u.jsx)("a",{href:"game-of-life-windows64.zip",children:"L\xd6VE version Windows executable"})}),Object(u.jsxs)("p",{children:["This has only been tested on Windows 10, but to run the executable on any OS supported by L\xd6VE,"," ",Object(u.jsx)("a",{href:"https://love2d.org/",target:"blank",children:"install the appropriate version of L\xd6VE"}),", then run ",Object(u.jsx)("a",{href:"game-of-life.love",children:"game-of-life.love"})]})]})},k=function(){var e=r.useContext(d).pauseFirst,t=r.useState("true"!==localStorage.getItem("promptShown")),n=Object(o.a)(t,2),i=n[0],a=n[1],c=r.useState(!1),s=Object(o.a)(c,2),l=s[0],b=s[1],h=r.useCallback((function(){localStorage.setItem("promptShown","true"),a(!1)}),[]),p=r.useCallback((function(){h(),e((function(){return b(!0)}))}),[h,e]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{closeDialog:function(){return b(!1)},showDialog:l,children:Object(u.jsx)(S,{})}),Object(u.jsx)("div",{className:"about-button-wrapper ".concat(i?"show-prompt":""),children:Object(u.jsx)("button",{className:"about-button",onClick:p,children:"About"})}),i&&Object(u.jsx)("div",{onClick:h,className:"prompt-background",children:Object(u.jsxs)("div",{className:"prompt",children:["I'd recommend reading the first two sections of this before starting. ",Object(u.jsx)("br",{}),"Tap anywhere to close"]})})]})},y=function(){var e=r.useContext(d),t=e.cellSizeInputControl,n=e.cellSizeInput,i=e.setCellSizeInput,a=e.gridSizeInputControl,c=e.gridSizeInput,b=e.setGridSizeInput,h=e.gridSize,p=e.cellSize,j=l(!1),f=Object(o.a)(j,2),m=f[0],g=f[1],v=r.useState(c*n),O=Object(o.a)(v,2),w=O[0],S=O[1],k=r.useMemo((function(){if(g){for(var e=[1],t=2;t<=w/2;t++)Number.isInteger(w/t)&&e.unshift(t);return e.unshift(w),e}}),[g,w]);return r.useEffect((function(){if(g){var e=w/c;i(e),S(e*c)}else S(c*n)}),[c]),r.useEffect((function(){if(g){var e=w/n;b(e),S(e*n)}else S(c*n)}),[n]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("label",{htmlFor:"gridSize",children:"Width/height of grid in cells"}),g?Object(u.jsx)("select",Object(s.a)(Object(s.a)({id:"gridSize"},a),{},{children:null===k||void 0===k?void 0:k.map((function(e){return Object(u.jsx)("option",{value:e,children:e},"grid".concat(e))}))})):Object(u.jsx)("input",Object(s.a)({type:"number",id:"gridSize"},a)),Object(u.jsx)(x,{show:c!==h,symbol:"*"}),Object(u.jsx)("label",{htmlFor:"cellSize",children:"Width/height of cells in pixels"}),g?Object(u.jsx)("select",Object(s.a)(Object(s.a)({id:"cellSize"},t),{},{children:null===k||void 0===k?void 0:k.map((function(e){return Object(u.jsx)("option",{value:e,children:e},"cell".concat(e))}))})):Object(u.jsx)("input",Object(s.a)({type:"number",id:"cellSize"},t)),Object(u.jsx)(x,{show:n!==p,symbol:"\u2020"}),Object(u.jsx)("label",{htmlFor:"lockGridSize",children:"Lock resulting grid size"}),Object(u.jsx)("input",Object(s.a)({type:"checkbox",id:"lockGridSize"},m))]})};function C(){var e=r.useContext(d),t=e.canvasRef,n=e.currentGridRef,i=e.cellSize,a=e.tempPause,c=e.drawGrid;return r.useCallback((function(e){if(t.current){var r=t.current.getBoundingClientRect(),s=Math.floor((e.clientX-r.x)/i),o=Math.floor((e.clientY-r.y)/i);a();var l=n.current.map((function(e){return Object(h.a)(e)}));l[s][o]=!n.current[s][o],n.current=l,c()}}),[t,i,a,n,c])}var z=function(){var e=r.useContext(d),t=e.canvasRef,n=e.screenWidth,i=e.screenHeight,a=e.gridSizeInput,c=e.patternSize,s=e.predictedSize,o=r.useMemo((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect().y}),[t,i,n]);if(o){if(c&&a<c)return Object(u.jsxs)("p",{children:["Resulting grid too small for pattern. ",Object(u.jsx)("br",{}),"Recommended min grid size:",Object(u.jsx)("br",{}),c,"*",c,"\xa0cells"]});if(s>Math.min(n,i))return Object(u.jsxs)("p",{children:["Resulting grid won't fit screen.",Object(u.jsx)("br",{}),"Recommended max grid size:",Object(u.jsx)("br",{}),n,"*",i,"\xa0pixels"]});if(s>Math.min(n,i-o))return Object(u.jsxs)("p",{children:["Controls & resulting grid won't fit screen.",Object(u.jsx)("br",{}),"Recommended max grid size:",Object(u.jsx)("br",{}),n,"*",i-o,"\xa0pixels"]})}return null};var I=function(){var e=r.useContext(d).currentGridRef,t=function(){var e=r.useRef(null),t=r.useCallback((function(){var t;(null===(t=e.current)||void 0===t?void 0:t.innerText)&&navigator.clipboard.writeText(e.current.innerText)}),[e]);return[e,t]}(),n=Object(o.a)(t,2),i=n[0],a=n[1],c=r.useMemo((function(){return function(e){var t=e.flat(),n=[e.length],r=0,i=!1;return t.forEach((function(e){e===i?r++:(n.push(r),r=1,i=!i)})),n.push(r),n.join(",")}(e.current)}),[e]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Copy the below text, select 'Load Saved Grid' in the pattern dropdown, & paste into the input"}),Object(u.jsx)("button",{onClick:a,children:"Copy pattern"}),Object(u.jsx)("input",{type:"text",hidden:!0,defaultValue:c}),Object(u.jsx)("p",{ref:i,children:c})]})};var R=function(){var e=r.useContext(d),t=e.canvasRef,n=e.setCanvasContext,i=e.fpsInputControl,a=e.fpsInput,c=e.gridSize,l=e.cellSize,b=e.fps,h=e.predictedSize,p=e.toggleAnimation,j=e.isAnimating,f=e.pauseFirst,m=r.useCallback((function(e){t.current=e,n((null===e||void 0===e?void 0:e.getContext("2d"))||void 0)}),[t,n]),g=w(),S=function(){var e=r.useContext(d),t=e.cellSizeInput,n=e.gridSizeInput,i=e.fpsInput,a=e.setCellSize,c=e.setFps,s=e.tempPause,o=e.drawGrid;return r.useCallback((function(){s(),a(t),c(i),o({cellSize:t,gridSize:n})}),[s,a,t,c,i,o,n])}();!function(){var e=r.useContext(d),t=e.canvasRef,n=e.screenWidth,i=e.screenHeight,a=e.cellSizeInput,c=e.setGridSizeInput,s=w(),o=r.useCallback((function(){if(t.current&&"complete"===document.readyState){var e=t.current.getBoundingClientRect().y,r=Math.min(n,i-e),o=Math.floor(r/a);c(o),s(o)}}),[t,n,i,a,c,s]);r.useEffect((function(){return document.addEventListener("readystatechange",o),function(){return document.removeEventListener("readystatechange",o)}}),[o])}();var R=C(),P=r.useState(!1),F=Object(o.a)(P,2),G=F[0],L=F[1],M=r.useCallback((function(){f((function(){return L(!0)}))}),[f]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{closeDialog:function(){return L(!1)},showDialog:G,children:Object(u.jsx)(I,{})}),Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(k,{}),Object(u.jsxs)("div",{className:"flex-container",children:[Object(u.jsxs)("div",{className:"flex-col",children:[Object(u.jsx)("div",{className:"control-container",children:Object(u.jsx)(O,{})}),Object(u.jsx)("div",{className:"control-container",children:Object(u.jsx)(y,{})}),Object(u.jsxs)("div",{className:"control-container",children:[Object(u.jsx)("label",{htmlFor:"fps",children:"Cycles per second"}),Object(u.jsx)("input",Object(s.a)({type:"number",id:"fps"},i)),Object(u.jsx)(x,{show:a!==b,symbol:"\u2020"})]})]}),Object(u.jsxs)("div",{className:"flex-col",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"*"}),"Start new game to apply"]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"\u2020"}),"Update/start new game to apply"]}),Object(u.jsxs)("p",{children:["Resulting grid size:",Object(u.jsx)("br",{}),h,"*",h,"\xa0pixels"]}),Object(u.jsx)(z,{})]})]}),Object(u.jsxs)("div",{className:"buttons-container",children:[Object(u.jsx)("button",{className:"play-pause-button",onClick:function(){return p()},children:j?"\u23f8\ufe0f Pause":"\u25b6\ufe0f Play"}),Object(u.jsx)("button",{onClick:S,children:"Update"}),Object(u.jsx)("button",{onClick:function(){return g()},children:"New game"}),Object(u.jsx)("button",{onClick:M,children:"Save"})]}),Object(u.jsx)("canvas",{ref:m,onClick:function(e){return R(e)},width:c*l,height:c*l})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/.exec(window.location.hostname));c.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(b,{children:Object(u.jsx)(R,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister().catch((function(e){return console.log(console.log(e.message))}))})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.0dc8f23d.chunk.js.map